<!DOCTYPE html>
<html>
<head>
<title>Match Scheduler</title>
<meta charset="UTF-8">

<style>
    body { font-family: Arial; text-align: center; }
    .match-box {
        margin: 10px auto;
        width: 420px;
        padding: 12px;
        background: #d1f7c4;
        border-radius: 10px;
        border: 2px solid green;
        font-size: 22px;
    }
</style>
</head>
<body>

<h1>Match Scheduler</h1>

<select id="gameSelect" onchange="generateMatches()">
    <option value="">Select Game</option>
    <option value="football">Football</option>
    <option value="basketball">Basketball</option>
    <option value="long jump">Long Jump</option>
    <option value="high jump">High Jump</option>
</select>

<div id="output"></div>

<script>
function generateMatches() {
    let selectedGame = document.getElementById("gameSelect").value;
    let output = document.getElementById("output");
    output.innerHTML = "";

    let players = JSON.parse(localStorage.getItem("players")) || [];
    
    let gamePlayers = players.filter(p => p.game === selectedGame);

    if (gamePlayers.length < 2) {
        output.innerHTML = "<p>Not enough players registered!</p>";
        return;
    }

    let available = [...gamePlayers];
    let matches = [];

    while (available.length >= 2) {
        let p1 = available.shift();
        let idx = available.findIndex(p => p.club !== p1.club);

        if (idx === -1) {
            output.innerHTML = "<p>Cannot schedule without same club conflict.</p>";
            return;
        }

        let p2 = available.splice(idx, 1)[0];
        matches.push(`${p1.name} (${p1.club}) VS ${p2.name} (${p2.club})`);
    }

    matches.forEach(match => {
        output.innerHTML += `<div class="match-box">${match}</div>`;
    });
}
</script>

</body>
</html>
